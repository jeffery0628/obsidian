---
Create: 2021年 十二月 26日, 星期日 17:27
tags: 
  - Engineering/hadoop
  - 大数据
---
## 拉取docker镜像
```bash
docker pull centos:centos7.9.2009
```

## 启动docker
```bash

docker run -dit --name hadoop101 --net hadoopnet --ip 192.168.1.101 -v /home/lizhen/data:/data centos:centos7.9.2009 /bin/bash

docker exec -it hadoop101 bash

```



## 容器安装必要软件
```bash
sudo yum install -y epel-release
sudo yum install -y psmisc nc net-tools rsync vim lrzsz ntp libzstd openssl-static tree iotop git wget

```
## 修改克隆虚拟机的静态ip
```bash
sudo vim /etc/sysconfig/network-scripts/ifcfg-eth0


# Generated by parse-kickstart
DEVICE="eth0"
IPV6INIT="yes"
BOOTPROTO="static"
UUID="997d5472-b614-451a-89ae-35df48fe4d1b"
ONBOOT="yes"
IPADDR=192.168.0.101
NETMASK=255.255.255.0
GATEWAY=192.168.0.1
DNS1=192.168.1.1
DNS2=192.168.0.1
NM_CONTROLLED=no

```
![[700 Attachments/Pasted image 20220101181321.png]]

## 配置主机映射
```bash
sudo vim /etc/hosts

192.168.1.100   hadoop100
192.168.1.101   hadoop101
192.168.1.102   hadoop102
192.168.1.103   hadoop103
192.168.1.104   hadoop104
192.168.1.105   hadoop105
192.168.1.106   hadoop106
192.168.1.107   hadoop107
192.168.1.108   hadoop108
192.168.1.109   hadoop109
```

## 关闭防火墙
```bash
systemctl stop firewalld
systemctl disable firewalld
```

## 创建用户
```bash
sudo useradd lizhen
sudo passwd lizhen
```

### 配置用户sudo权限
```bash
vim /etc/sudoers

## Allow root to run any commands anywhere
root    ALL=(ALL)     ALL
lizhen   ALL=(ALL)     ALL
```

## 在/opt目录下创建文件夹
```bash
sudo mkdir /opt/module /opt/software
sudo chown lizhen:lizhen /opt/module /opt/software
```


## 安装JDK
```bash
cd /data
tar -zxvf jdk-8u301-linux-x64.tar.gz  -C /opt/module/
```




## 安装Hadoop
[下载地址](https://archive.apache.org/dist/hadoop/common/hadoop-3.1.3/)
```bash
tar -zxvf hadoop-3.1.3.tar.gz -C /opt/module/
```

### 配置环境变量
```bash
vim /etc/profile.d/my_env.sh

export HADOOP_HOME=/opt/module/hadoop-3.1.3
export JAVA_HOME=/opt/module/jdk1.8.0_301
export PATH=$PATH:$JAVA_HOME/bin
export PATH=$PATH:$HADOOP_HOME/bin
export PATH=$PATH:$HADOOP_HOME/sbin
```
验证安装成功
```bash
souce /etc/profile
java -version
hadoop version
hadoop checknative
```
如果Hadoop命令不能用再重启
```bash
sync
sudo reboot
```




